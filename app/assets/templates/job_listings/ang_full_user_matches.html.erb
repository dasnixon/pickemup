<div ng-switch on='matchings.length'>
  <div ng-switch-when='0'>
    <div ng-switch on='fully_activated'>
      <div ng-switch-when='true'>
        <p>
          Make sure you fill our your preferences to start getting matched with companies.
          You can also start looking around by searching for companies that you may want to apply for.
        </p>
      </div>
      <div ng-switch-default>
        <p>You do not have your subscription setup.</p>
      </div>
    </div>
  </div>
  <div ng-switch-default>
    <div ng-repeat="(job_listing_info, matches) in matchings">
      <h5 style='margin-bottom: 10px;'>{{ splitString(job_listing_info, '___')[0] }}<a class='btn btn-primary pull-right' href='/companies/{{company_id}}/job_listings/{{job_listing_id}}/search_users'><strong>View More Matches</strong></a></h5>
      <div class='well' ng-repeat="user in matches">
        <div class='media'>
          <div class='pull-left' style='clear: both; margin-top: 5px;'>
            <img class='media-object img-rounded' style="max-width: 120px; max-height: 120px;" ng-src="{{user.profile_image || '<%= asset_path('default_logo.png') %>'}}">
          </div>
          <div class='pull-left' style='clear: both; margin-top: 5px;'>
            <div class='box-score box-item isotope-item' ng-class="scoreClass(user.score)">
              <div class='box-link'>
                <span class='box-number box-number-item'>
                  {{user.score || '0'}} %
                </span>
                <br />
                <span class='box-number box-number-item'>
                  MATCH
                </span>
              </div>
            </div>
          </div>
          <div class='media-body'>
            <div class='pull-right' style="height: 200px;">
              <div class='pull-right'>
                <button class="btn btn-info" onclick="location.href='/users/{{user.id}}/resume'">
                  View Resume
                </button>
                <button class="btn btn-success" onclick="location.href='/companies/{{company_id}}/messages/new?job_listing_id={{job_listing_id}}&receiver={{user.id}}'">
                  Send Message
                </button>
              </div>
              <div class="clearfix"></div>
              <dl class='dl-horizontal side-info'>
                <dt>Location</dt>
                <dd>{{user.locations.join(', ')}}</dd>
                <dt>Salary</dt>
                <dd>${{user.expected_salary}}</dd>
                <dt>Languages</dt>
                <dd>{{user.skills.join(', ')}}</dd>
              </dl>
            </div>
            <h6 class='media-heading'>
              {{user.name}} <small> {{user.valid_us_worker && "U.S. Citizen or Green Card holder" || "Not a U.S. Citizen or Green Card holder"}}</small>
            </h4>
            <p ng-bind-html-unsafe="user.description|truncate:650:this"></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
